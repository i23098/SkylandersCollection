<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

  <context:annotation-config />
  <context:component-scan base-package="collections.skylanders.installer, collections.webapi.springInit, collections.webapi.controller, collections.server.service, collections.persistence" />
  
  <bean id="itemServiceJsonExtraParser" class="collections.skylanders.installer.service.ItemServiceJsonExtraParser" />
  
  <util:properties id="colProperties" location="classpath:/collections.properties" />
  
  <bean id="categoryServiceImpl" class="collections.server.service.CategoryServiceImpl">
    <constructor-arg value="#{colProperties[imgDirProp]}" />
  </bean>
  
  <bean id="itemServiceImpl" class="collections.server.service.ItemServiceImpl">
    <constructor-arg value="#{colProperties[imgDirProp]}" />
  </bean>
  
  <!-- 
               Database Configuration
   -->
  <tx:annotation-driven transaction-manager="txManager"/>
  
  <bean name="collectionsDS" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/collection?useUnicode=true&amp;characterEncoding=UTF-8" />
    <property name="username" value="collection_usr" />
    <property name="password" value="collection1234" />
  </bean>

  <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="collectionsDS" />
  </bean>
   
  <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="collectionsDS" />
  </bean>
</beans>